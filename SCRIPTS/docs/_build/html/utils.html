
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>utils module &#8212; Tesis 2023 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="visualize_annotations module" href="visualize_annotations.html" />
    <link rel="prev" title="roi module" href="roi.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-utils">
<span id="utils-module"></span><h1>utils module<a class="headerlink" href="#module-utils" title="Permalink to this heading">¶</a></h1>
<p>Utility functions for deep learning sound detection module</p>
<dl class="py class">
<dt class="sig sig-object py" id="utils.Params">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">Params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#Params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.Params" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that loads hyperparameters from a json file.</p>
<p>Example:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">params</span> <span class="pre">=</span> <span class="pre">Params(json_path)</span>
<span class="pre">print(params.learning_rate)</span>
<span class="pre">params.learning_rate</span> <span class="pre">=</span> <span class="pre">0.5</span>&#160; <span class="pre">#</span> <span class="pre">change</span> <span class="pre">the</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">learning_rate</span> <span class="pre">in</span> <span class="pre">params</span>
<span class="pre">`</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="utils.Params.dict">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dict</span></span><a class="headerlink" href="#utils.Params.dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives dict-like access to Params instance by <a href="#id1"><span class="problematic" id="id2">`</span></a>params.dict[‘learning_rate’]</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.Params.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#Params.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.Params.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.Params.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#Params.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.Params.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads parameters from json file</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="utils.RunningAverage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">RunningAverage</span></span><a class="reference internal" href="_modules/utils.html#RunningAverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.RunningAverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A simple class that maintains the running average of a quantity</p>
<p>Example:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">loss_avg</span> <span class="pre">=</span> <span class="pre">RunningAverage()</span>
<span class="pre">loss_avg.update(2)</span>
<span class="pre">loss_avg.update(4)</span>
<span class="pre">loss_avg()</span> <span class="pre">=</span> <span class="pre">3</span>
<span class="pre">`</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="utils.RunningAverage.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#RunningAverage.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.RunningAverage.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.find_file">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">find_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#find_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.find_file" title="Permalink to this definition">¶</a></dt>
<dd><p>File searching tool. Searches a file with filename recurively in a directory.</p>
<dl class="simple">
<dt>filename<span class="classifier">str, optional</span></dt><dd><p>Filename of the file that you want to search.</p>
</dd>
<dt>search_path<span class="classifier">str, optional</span></dt><dd><p>Path to directory. The default is the current directory ‘./’.</p>
</dd>
</dl>
<dl class="simple">
<dt>str</dt><dd><p>Absolute path to file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.load_checkpoint">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">load_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#load_checkpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.load_checkpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads model parameters (state_dict) from file_path. If optimizer is provided, loads state_dict of
optimizer assuming it is present in checkpoint.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>checkpoint: (string) filename which needs to be loaded
model: (torch.nn.Module) model for which the parameters are loaded
optimizer: (torch.optim) optional: resume optimizer from checkpoint</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.roi2windowed">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">roi2windowed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#roi2windowed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.roi2windowed" title="Permalink to this definition">¶</a></dt>
<dd><p>Split a single region of interest (roi) into multiple regions of fixed size according
to a window length. If window length (wl) is longer than the roi, the result is a single
roi of length wl and centered in the middle of the roi. If the window length is 
shorter than the, the roi is splitted into multiple regions. Regions must have at
least 50% of overlap with the new window length. There is no overlap between windows.</p>
<dl class="simple">
<dt>wl<span class="classifier">float</span></dt><dd><p>Window length of the resulting regions of interest</p>
</dd>
<dt>roi<span class="classifier">pandas.core.frame.DataFrame</span></dt><dd><p>Regions of interest with at least five columns, min_t, max_t, min_f, max_f, label.</p>
</dd>
</dl>
<dl class="simple">
<dt>roi_fmt<span class="classifier">pandas.core.frame.DataFrame</span></dt><dd><p>Formated regions of interest with fixed size.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.save_checkpoint">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">save_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_best</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#save_checkpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.save_checkpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves model and training parameters at checkpoint + ‘last.pth.tar’. If is_best==True, also saves
checkpoint + ‘best.pth.tar’</p>
<dl class="simple">
<dt>Args:</dt><dd><p>state: (dict) contains model’s state_dict, may contain other keys such as epoch, optimizer state_dict
is_best: (bool) True if it is the best model seen till now
checkpoint: (string) folder where parameters are to be saved</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.save_dict_to_json">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">save_dict_to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#save_dict_to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.save_dict_to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves dict of floats in json file</p>
<dl class="simple">
<dt>Args:</dt><dd><p>d: (dict) of float-castable values (np.float, int, float, etc.)
json_path: (string) path to json file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.set_logger">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">set_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#set_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.set_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the logger to log info in terminal and file <cite>log_path</cite>.</p>
<p>In general, it is useful to have a logger so that every output to the terminal is saved
in a permanent file. Here we save it to <cite>model_dir/train.log</cite>.</p>
<p>Example:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">logging.info(&quot;Starting</span> <span class="pre">training...&quot;)</span>
<span class="pre">`</span></code></p>
<dl class="simple">
<dt>Args:</dt><dd><p>log_path: (string) where to log</p>
</dd>
</dl>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Tesis</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">SCRIPTS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ML_Model_1.html">ML_Model_1 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tesis5.html">Tesis5 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dataset.html">build_dataset module</a></li>
<li class="toctree-l2"><a class="reference internal" href="init.html">init module</a></li>
<li class="toctree-l2"><a class="reference internal" href="roi.html">roi module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualize_annotations.html">visualize_annotations module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">SCRIPTS</a><ul>
      <li>Previous: <a href="roi.html" title="previous chapter">roi module</a></li>
      <li>Next: <a href="visualize_annotations.html" title="next chapter">visualize_annotations module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Michael & Sebas.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>