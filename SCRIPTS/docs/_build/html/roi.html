
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>roi module &#8212; Tesis 2023 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="utils module" href="utils.html" />
    <link rel="prev" title="init module" href="init.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-roi">
<span id="roi-module"></span><h1>roi module<a class="headerlink" href="#module-roi" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="roi.create_label_df">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">create_label_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_folder</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#create_label_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.create_label_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a label DataFrame based on csv files in the input folder.</p>
<dl class="simple">
<dt>input_folder<span class="classifier">str</span></dt><dd><p>The path to the folder containing the csv files.</p>
</dd>
</dl>
<dl class="simple">
<dt>label_df<span class="classifier">pandas DataFrame</span></dt><dd><p>The created label DataFrame containing the labels of the csv files.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.create_spectrogram_dataframe">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">create_spectrogram_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#create_spectrogram_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.create_spectrogram_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Pandas DataFrame containing the names and file paths of spectrograms in a directory.</p>
<dl class="simple">
<dt>directory<span class="classifier">str</span></dt><dd><p>The directory containing the spectrogram files.</p>
</dd>
</dl>
<dl class="simple">
<dt>pandas.DataFrame</dt><dd><p>A dataframe containing two columns: ‘NAME’, the basename of the spectrogram file without the ‘.png’ extension, 
and ‘Path’, the file path to the spectrogram.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.filter_label">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">filter_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#filter_label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.filter_label" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Filter the dataframe row based on specific labels.</p>
</div></blockquote>
<dl class="simple">
<dt>row<span class="classifier">pd.Series</span></dt><dd><p>The row of the dataframe that needs to be filtered.</p>
</dd>
</dl>
<dl class="simple">
<dt>bool</dt><dd><p>True if the label in the row is one of the specific labels (‘PHYCUV_M’, ‘PHYCUV_F’,’BOAALB_M’, ‘BOAALB_F’, ‘BOALUN_F’, ‘BOALUN_M’, ‘PHYCUV_M’, ‘PHYCUV_F’), otherwise False.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.filter_window">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">filter_window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#filter_window"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.filter_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter a dataframe to get windows of time periods.</p>
<p>This function filters a dataframe based on start, end and step time values, creating a new dataframe for each
time window. The resulting dataframes are grouped by the file name and stored in a dictionary.</p>
<p>Args:
df (pandas.DataFrame): Dataframe to be filtered.
start (int): Start time value in seconds.
end (int): End time value in seconds.
step (int): Step value in seconds to create new time windows.</p>
<p>Returns:
tuple: A tuple containing:</p>
<blockquote>
<div><p>df_mlabel (list): A list of dataframes containing only rows with time between start and end values.
fname_lists (dict): A dictionary of dataframes grouped by the file name.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.generate_spectrogram">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">generate_spectrogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">22050</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_fft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2048</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">512</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#generate_spectrogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.generate_spectrogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate spectrogram from audio file and save it as an image.</p>
<dl class="simple">
<dt>audio_file_path<span class="classifier">str</span></dt><dd><p>Path to audio file</p>
</dd>
<dt>output_file_path<span class="classifier">str</span></dt><dd><p>Path to save the generated spectrogram</p>
</dd>
<dt>sr<span class="classifier">int, optional</span></dt><dd><p>Sampling rate of the audio file, by default 22050</p>
</dd>
<dt>n_fft<span class="classifier">int, optional</span></dt><dd><p>Length of the FFT window, by default 2048</p>
</dd>
<dt>hop_length<span class="classifier">int, optional</span></dt><dd><p>Number of samples between successive frames, by default 512</p>
</dd>
</dl>
<p>None</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.generate_spectrograms_from_folder">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">generate_spectrograms_from_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#generate_spectrograms_from_folder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.generate_spectrograms_from_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates spectrograms from WAV files in a given folder and saves the spectrograms in a specified output folder.</p>
<dl class="simple">
<dt>input_folder<span class="classifier">str</span></dt><dd><p>The path to the folder containing the WAV files.</p>
</dd>
<dt>output_folder<span class="classifier">str</span></dt><dd><p>The path to the folder where the spectrograms will be saved. If the folder doesn’t exist, it will be created.</p>
</dd>
</dl>
<p>None</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.get_labels_from_csv">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">get_labels_from_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">csv_file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#get_labels_from_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.get_labels_from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>This function reads a csv file and returns a list of labels.</p>
<dl class="simple">
<dt>csv_file_path<span class="classifier">str</span></dt><dd><p>The path to the csv file that contains the labels.</p>
</dd>
</dl>
<dl class="simple">
<dt>list</dt><dd><p>A list of strings representing the labels.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.get_spectrogram_paths">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">get_spectrogram_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#get_spectrogram_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.get_spectrogram_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the paths of all PNG files in a directory and its subdirectories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>str</em>) – A string that represents the path to the directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of strings, where each string is the path to a PNG file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
<p>Example usage::
.. code-block:: python</p>
<blockquote>
<div><p>spectrogram_paths = get_spectrogram_paths(‘/path/to/directory’)
for spectrogram_path in spectrogram_paths:</p>
<blockquote>
<div><p># do something with the spectrogram_path
print(spectrogram_path)</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.load_annotations">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">load_annotations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_annot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nombre</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#load_annotations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.load_annotations" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Loads annotations from .txt files in the given directory and returns a dataframe.</p>
</div></blockquote>
<dl class="simple">
<dt>path_annot<span class="classifier">str</span></dt><dd><p>The path to the folder containing the annotation files.</p>
</dd>
<dt>nombre<span class="classifier">list</span></dt><dd><p>A list of strings representing the names of the annotation files (without the ‘.txt’ extension).</p>
</dd>
</dl>
<dl class="simple">
<dt>df_mlabel<span class="classifier">pd.DataFrame</span></dt><dd><p>The dataframe containing the loaded annotations.</p>
</dd>
<dt>fname_lists<span class="classifier">list</span></dt><dd><p>A list of filenames corresponding to the loaded annotations.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.roi2windowed2">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">roi2windowed2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#roi2windowed2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.roi2windowed2" title="Permalink to this definition">¶</a></dt>
<dd><p>Split a single region of interest (roi) into multiple regions of fixed size according
to a window length. If window length (wl) is longer than the roi, the result is a single
roi of length wl and centered in the middle of the roi. If the window length is 
shorter than the, the roi is splitted into multiple regions. Regions must have at
least 50% of overlap with the new window length. There is no overlap between windows.</p>
<dl class="simple">
<dt>wl<span class="classifier">float</span></dt><dd><p>Window length of the resulting regions of interest</p>
</dd>
<dt>roi<span class="classifier">pandas.core.frame.DataFrame</span></dt><dd><p>Regions of interest with at least five columns, min_t, max_t, min_f, max_f, label.</p>
</dd>
</dl>
<dl class="simple">
<dt>roi_fmt<span class="classifier">pandas.core.frame.DataFrame</span></dt><dd><p>Formated regions of interest with fixed size.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.save_fname_lists">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">save_fname_lists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname_lists</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#save_fname_lists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.save_fname_lists" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>This function saves the data in the <cite>fname_lists</cite> dictionary to csv files.</p>
</div></blockquote>
<p>Parameters:
fname_lists (dict): A dictionary where the key is a string representing the name of an audio file,</p>
<blockquote>
<div><p>and the value is a list of dataframes.</p>
</div></blockquote>
<p>save_path (str): The path to the directory where the csv files should be saved.</p>
<p>Returns:
None</p>
<p>Example:
save_fname_lists(fname_lists, “data/csv_files”)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.save_merged_df">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">save_merged_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">merged_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#save_merged_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.save_merged_df" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Saves the dataframes to a csv file.</p>
</div></blockquote>
<dl class="simple">
<dt>merged_df<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe to be saved.</p>
</dd>
<dt>save_path<span class="classifier">str</span></dt><dd><p>The path to save the csv file.</p>
</dd>
</dl>
<p>None</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="roi.trim_audio_files">
<span class="sig-prename descclassname"><span class="pre">roi.</span></span><span class="sig-name descname"><span class="pre">trim_audio_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_length</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/roi.html#trim_audio_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#roi.trim_audio_files" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Trim the audio files in <cite>src_dir</cite> into smaller chunks of <cite>chunk_length</cite> seconds and save them in <cite>dst_dir</cite>.</p>
</div></blockquote>
<p>Each audio file in <cite>src_dir</cite> will be divided into chunks of <cite>chunk_length</cite> seconds and saved in a new folder with the same name as the original file in <cite>dst_dir</cite>. Each chunk will have a unique filename consisting of the original filename followed by an underscore and a chunk index.</p>
<dl class="simple">
<dt>src_dir<span class="classifier">str</span></dt><dd><p>The path to the source directory containing the audio files.</p>
</dd>
<dt>dst_dir<span class="classifier">str</span></dt><dd><p>The path to the destination directory where the trimmed audio chunks will be saved.</p>
</dd>
<dt>chunk_length<span class="classifier">float</span></dt><dd><p>The length of each audio chunk in seconds.</p>
</dd>
</dl>
<p>None</p>
<p>The function assumes that all audio files in <cite>src_dir</cite> are in WAV format.</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Tesis</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">SCRIPTS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ML_Model_1.html">ML_Model_1 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tesis5.html">Tesis5 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dataset.html">build_dataset module</a></li>
<li class="toctree-l2"><a class="reference internal" href="init.html">init module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">roi module</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualize_annotations.html">visualize_annotations module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">SCRIPTS</a><ul>
      <li>Previous: <a href="init.html" title="previous chapter">init module</a></li>
      <li>Next: <a href="utils.html" title="next chapter">utils module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Michael & Sebas.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/roi.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>